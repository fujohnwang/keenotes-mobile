# NoteList 定义规范

NoteList组件是在Take Note界面和Review界面都会用到的组件，所以，为了规范这个组件的行为和一致性，我们做如下定义：

## 性能优化

1. 初次展示，从本地查询固定数量的数据展示（也就是分页大小，比如默认20条）
2. 用户下拉滚动后，通过懒加载的方式分页加载数据。
3. 后台如果有实时同步的数据到达，只在同步数据全部到达之后，再按照1的方式，重新加载并展示， 同时， 最新一条数据以动画的形式添加到Note List头部，增加交互效果。
- 实现细节上的优化思路建议： 实时数据到达后做一个计数，计数=1， 不需要像1那样刷新NoteList，直接将这条数据以动画形式添加到Note List头部即可； 如果计数 > 1 ， 再等所有数据同步完成后，按照1的逻辑刷新，并针对最后一条数据做动画提醒。

总的原则是，任何时候，都不要把数据库中的数据以及批量同步的数据全量加载到NoteList，以免内存泄漏。比如，假如我有几万条甚至更多数据导入数据库，各个端在同步这些数据的时候，如果不做NoteList优化，会全都加载到NoteList，显然对内存和UI渲染的压力就比较大了。


## UI交互

NoteList的header部分展示三部分信息：

1. notes 数量信息。
2. 数据同步状态信息： 如果后台有数据同步任务正在进行的话，需要这里展示同步的动态效果spinner，默认不展示。
3. 同步信道连接状态信息。

NoteList的主体部分，即以 [Note Card](NoteCard.md) 列表形式展示具体notes内容。






